<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="./simple-navmesh-constraint.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../resources/header/logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>A-frame Gallery | mAa4a</title>
  </head>
  <body>
    <a id="go-back" href="../">
    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" alt="exit" style="position:absolute; z-index: 99; width: 60px; padding: 2em;">
      <circle cx="40" cy="40" r="40" fill="#D9D9D9"></circle>
      <rect x="18" y="39.2843" width="40" height="7" rx="3.5" transform="rotate(-45 18 39.2843)" fill="white"></rect>
      <rect x="18" y="39.2843" width="40" height="7" rx="3.5" transform="rotate(-45 18 39.2843)" fill="white"></rect>
      <rect x="22.9497" y="35" width="40" height="7" rx="3.5" transform="rotate(45 22.9497 35)" fill="white"></rect>
      <rect x="22.9497" y="35" width="40" height="7" rx="3.5" transform="rotate(45 22.9497 35)" fill="white"></rect>
    </svg>
    <script>
    document.getElementById("go-back").addEventListener("click", () => {
    history.back();
    });
    </script>
  </a>
    <a-scene>
      <a-assets>
        <img id="img1" src="./assets/bildes/images-1.jpg">
        <img id="img2" src="./assets/bildes/images-2.jpg">
        <img id="img3" src="./assets/bildes/images-3.jpg">
        <img id="img4" src="./assets/bildes/images-4.jpg">
        <img id="img5" src="./assets/bildes/images-5.jpg">
        <img id="img6" src="./assets/bildes/images-6.jpg">
        <img id="img7" src="./assets/bildes/images-7.jpg">
        <img id="img8" src="./assets/bildes/images-8.jpg">
        <img id="img9" src="./assets/bildes/images-9.jpg">
        <img id="img10" src="./assets/bildes/images-10.jpg">
        <img id="img11" src="./assets/bildes/images-11.jpg">
        <img id="img12" src="./assets/bildes/images-12.jpg">
        <img id="img13" src="./assets/bildes/images-13.jpg">
        <img id="img14" src="./assets/bildes/images-14.jpg">
        <img id="img15" src="./assets/bildes/images-15.jpg">
        <img id="img16" src="./assets/bildes/images-16.jpg">
        <img id="img17" src="./assets/bildes/images-17.jpg">
        <img id="img18" src="./assets/bildes/images-18.jpg">
        <img id="img19" src="./assets/bildes/images-19.jpg">
        <img id="img20" src="./assets/bildes/images-20.jpg">
        <img id="img21" src="./assets/bildes/images-21.jpg">
        <img id="img22" src="./assets/bildes/images-22.jpg">
        <img id="img23" src="./assets/bildes/images-23.jpg">
        <img id="img24" src="./assets/bildes/images-24.jpg">
        <img id="img25" src="./assets/bildes/images-25.jpg">
        <img id="img26" src="./assets/bildes/images-26.jpg">
        <img id="img27" src="./assets/bildes/images-27.jpg">
        <img id="img28" src="./assets/bildes/images-28.jpg">
        <img id="img29" src="./assets/bildes/images-29.jpg">
        <img id="img30" src="./assets/bildes/images-30.jpg">
        <!-- TEXTURES -->
          <!--WALL-->
          <img id="wall_diff" src="./assets/textures/wall_textures/plastered_wall_04_diff_1k.jpg">
          <img id="wall_arm" src="./assets/textures/wall_textures/plastered_wall_04_arm_1k.jpg">
          <img id="wall_normal" src="./assets/textures/wall_textures/plastered_wall_04_nor_gl_1k.jpg">
          <!--FLOOR-->
          <img id="floor_diff" src="./assets/textures/floor_texture/worn_planks_diff_1k.jpg">
          <img id="floor_arm" src="./assets/textures/floor_texture/worn_planks_arm_1k.jpg">
          <img id="floor_normal" src="./assets/textures/floor_texture/worn_planks_nor_gl_1k.jpg">
        <!--MODELS-->
        <a-asset-item id="sofa_model" src="./assets/models/sofa/painted_wooden_sofa_1k.gltf"></a-asset-item>
        <a-asset-item id="table_model" src="./assets/models/table/wooden_table_02_1k.gltf"></a-asset-item>
        <a-asset-item id="camera" src="./assets/models/camera/Camera_01_1k.gltf"></a-asset-item>
        <a-asset-item id="chandelier" src="./assets/models/chandelier/Chandelier_01_1k.gltf"></a-asset-item>
        <a-asset-item id="power_box" src="./assets/models/power_box/Power_Box_01_1k.gltf"></a-asset-item>
      </a-assets>
            <!-- Camera rig with navmesh constraint and keyboard controls -->
      <a-camera wasd-controls="acceleration:20"
        simple-navmesh-constraint="navmesh:.navmesh;fall:3; height:1.65;exclude:.navmesh-hole"
        look-controls="pointerLockEnabled: true"
        position="0 1.65 7"
      ></a-camera>
                 <!-- Lighting -->
      <a-entity light="type: ambient; intensity: 0.25"></a-entity>
      <a-entity light="type: directional; intensity: 0.8" position="0 10 5"></a-entity>

      <!-- Room walls and ceiling -->
      <a-plane src="#wall_diff" material="side: double; ambientOcclusionMap: #wall_arm; color: #ffffff; metalnessMap: #wall_arm; normalMap: #wall_normal; roughnessMap: #wall_arm" position="0 2.5 -9.99" height="5" width="20" color="#eee"></a-plane>
      <a-plane src="#wall_diff" material="side: double; ambientOcclusionMap: #wall_arm; color: #ffffff; metalnessMap: #wall_arm; normalMap: #wall_normal; roughnessMap: #wall_arm" position="0 2.5 9.99" height="5" width="20" color="#eee"></a-plane>

      <!-- NAVMESH -->
      <a-plane
        class="navmesh"
        position="0 0 0"
        rotation="-90 0 0"
        width="19.5"
        height="19.5"
        color="#999"
        visible="false"
      ></a-plane>

      <!-- Ceiling -->
      <a-plane
        src="#wall_diff"
        material="side: double; ambientOcclusionMap: #wall_arm; color: #ffffff; metalnessMap: #wall_arm; normalMap: #wall_normal; roughnessMap: #wall_arm"
        position="0 5 0"
        rotation="-90 0 0"
        width="20"
        height="20"
        color="#eee"
        ></a-plane>

      <!--FLOOR TEXTURE-->
      <a-plane
        src="#floor_diff"
        material="src: #floor_diff; color: #ffffff; side: double; metalnessMap: #floor_arm; normalMap: #floor_normal; roughnessMap: #floor_arm; ambientOcclusionMap: #floor_arm"
        position="0 0.01 0"
        rotation="-90 0 0"
        width="20"
        height="20"
      ></a-plane>

      <!-- Sofa model -->
      <a-entity gltf-model="./assets/models/sofa/painted_wooden_sofa_1k.gltf" scale="2 1 1.4" position="-0.75 0.00049 0" rotation="0 -90 0">
        <a-plane
        class="navmesh-hole"
        rotation="-90 0 0" width="1.5"
        height="0.6" position="0 0 -0.02"
        color="red"
        scale="1.64 1.21 1"
        ></a-plane>
      </a-entity>
      <a-entity gltf-model="./assets/models/sofa/painted_wooden_sofa_1k.gltf" scale="2 1 1.4" position="0.75 0.00049 0" rotation="0 90 0">
        <a-plane
        class="navmesh-hole"
        rotation="-90 0 0" width="1.5"
        height="0.6" position="0 0 -0.02"
        color="red"
        scale="1.64 1.21 1"
        ></a-plane>
      </a-entity>
      <!-- Table model -->
      <a-entity gltf-model="./assets/models/table/wooden_table_02_1k.gltf" position="0 0 -8.80277" scale="3 1.5 3">
        <a-plane class="navmesh-hole" rotation="-90 0 0" width="1.5" height="0.6" color="red" scale="0.95 1.2 1"></a-plane>
        <a-entity gltf-model="./assets/models/camera/Camera_01_1k.gltf" position="0 0.805 0" rotation="0 29.999999999999996 0" scale="1 2 1"></a-entity>
      </a-entity>
      <!-- Chandelier model -->
      <a-entity gltf-model="./assets/models/chandelier/Chandelier_01_1k.gltf" position="0 5 0" rotation="0 0 0" scale="2.25 2.25 2.25"></a-entity>
      <!-- Power box model -->
      <a-entity gltf-model="./assets/models/power_box/Power_Box_01_1k.gltf" position="0 2 9.89" rotation="0 180 0" scale="2 2 2">
        <a-plane class="navmesh-hole" rotation="-90 0 71.5" width="1.5" height="0.6" color="red" scale="0.35 0.1 1" position="-0.21 -1 0.18"></a-plane>
      </a-entity>

      <!-- Walls with images -->
        <a-entity>
          <a-plane src="#wall_diff" material="src: #wall_diff; color: #ffffff; side: double; metalnessMap: #wall_arm; normalMap: #wall_normal; roughnessMap: #wall_arm; ambientOcclusionMap: #wall_arm" position="-9.9 2.5 0" rotation="0 90 0" height="5" width="20" color="#eee"></a-plane>
          <!-- 3 rows of 5 images -->
          <!-- Left Wall -->
          <a-image src="#img1"  auto-aspect="src: #img1"  position="-9.89 4.2 -8" rotation="0 90 0"></a-image>
          <a-image src="#img2"  auto-aspect="src: #img2"  position="-9.89 4.2 -4" rotation="0 90 0"></a-image>
          <a-image src="#img3"  auto-aspect="src: #img3"  position="-9.89 4.2 0"  rotation="0 90 0"></a-image>
          <a-image src="#img4"  auto-aspect="src: #img4"  position="-9.89 4.2 4"  rotation="0 90 0"></a-image>
          <a-image src="#img5"  auto-aspect="src: #img5"  position="-9.89 4.2 8"  rotation="0 90 0"></a-image>

          <a-image src="#img6"  auto-aspect="src: #img6"  position="-9.89 2.5 -8" rotation="0 90 0"></a-image>
          <a-image src="#img7"  auto-aspect="src: #img7"  position="-9.89 2.5 -4" rotation="0 90 0"></a-image>
          <a-image src="#img8"  auto-aspect="src: #img8"  position="-9.89 2.5 0"  rotation="0 90 0"></a-image>
          <a-image src="#img9"  auto-aspect="src: #img9"  position="-9.89 2.5 4"  rotation="0 90 0"></a-image>
          <a-image src="#img10" auto-aspect="src: #img10" position="-9.89 2.5 8"  rotation="0 90 0"></a-image>

          <a-image src="#img11" auto-aspect="src: #img11" position="-9.89 0.8 -8" rotation="0 90 0"></a-image>
          <a-image src="#img12" auto-aspect="src: #img12" position="-9.89 0.8 -4" rotation="0 90 0"></a-image>
          <a-image src="#img13" auto-aspect="src: #img13" position="-9.89 0.8 0"  rotation="0 90 0"></a-image>
          <a-image src="#img14" auto-aspect="src: #img14" position="-9.89 0.8 4"  rotation="0 90 0"></a-image>
          <a-image src="#img15" auto-aspect="src: #img15" position="-9.89 0.8 8"  rotation="0 90 0"></a-image>     
        </a-entity>
  
        <!-- Wall 2 (right) -->
        <a-entity>
          <a-plane src="#wall_diff" material="src: #wall_diff; color: #ffffff; side: double; metalnessMap: #wall_arm; normalMap: #wall_normal; roughnessMap: #wall_arm; ambientOcclusionMap: #wall_arm" position="9.9 2.5 0" rotation="0 -90 0" height="5" width="20" color="#eee"></a-plane>
          <!-- Right Wall -->
          <a-image src="#img16" auto-aspect="src: #img16" position="9.89 4.2 -8" rotation="0 -90 0"></a-image>
          <a-image src="#img17" auto-aspect="src: #img17" position="9.89 4.2 -4" rotation="0 -90 0"></a-image>
          <a-image src="#img18" auto-aspect="src: #img18" position="9.89 4.2 0"  rotation="0 -90 0"></a-image>
          <a-image src="#img19" auto-aspect="src: #img19" position="9.89 4.2 4"  rotation="0 -90 0"></a-image>
          <a-image src="#img20" auto-aspect="src: #img20" position="9.89 4.2 8"  rotation="0 -90 0"></a-image>

          <a-image src="#img21" auto-aspect="src: #img21" position="9.89 2.5 -8" rotation="0 -90 0"></a-image>
          <a-image src="#img22" auto-aspect="src: #img22" position="9.89 2.5 -4" rotation="0 -90 0"></a-image>
          <a-image src="#img23" auto-aspect="src: #img23" position="9.89 2.5 0"  rotation="0 -90 0"></a-image>
          <a-image src="#img24" auto-aspect="src: #img24" position="9.89 2.5 4"  rotation="0 -90 0"></a-image>
          <a-image src="#img25" auto-aspect="src: #img25" position="9.89 2.5 8"  rotation="0 -90 0"></a-image>

          <a-image src="#img26" auto-aspect="src: #img26" position="9.89 0.8 -8" rotation="0 -90 0"></a-image>
          <a-image src="#img27" auto-aspect="src: #img27" position="9.89 0.8 -4" rotation="0 -90 0"></a-image>
          <a-image src="#img28" auto-aspect="src: #img28" position="9.89 0.8 0"  rotation="0 -90 0"></a-image>
          <a-image src="#img29" auto-aspect="src: #img29" position="9.89 0.8 4"  rotation="0 -90 0"></a-image>
          <a-image src="#img30" auto-aspect="src: #img30" position="9.89 0.8 8"  rotation="0 -90 0"></a-image>
        </a-entity>
    </a-scene>
    <script>
      AFRAME.registerComponent('auto-aspect', {
        schema: {
          src: {type: 'selector'}
        },
        init: function () {
          const imgEl = this.data.src;
          const el = this.el;
          if (imgEl && imgEl.getAttribute('src')) {
            const img = new Image();
            img.src = imgEl.getAttribute('src');
            img.onload = function () {
              const aspect = img.width / img.height;
              
              // Maximum allowed dimensions
              const maxWidth = 2;
              const maxHeight = 1.5;
    
              let width = maxWidth;
              let height = width / aspect;
    
              if (height > maxHeight) {
                height = maxHeight;
                width = height * aspect;
              }
    
              el.setAttribute('width', width);
              el.setAttribute('height', height);
            };
          }
        }
      });
    </script>
  </body>
</html>